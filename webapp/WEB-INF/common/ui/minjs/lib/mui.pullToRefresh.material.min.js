!function(t){var n=t.className("pull-top-tips");t.PullToRefresh=t.PullToRefresh.extend({init:function(n,i){this._super(n,i),this.options=t.extend(!0,{down:{tips:{colors:["008000","d8ad44","d00324","dc00b8","017efc"],size:200,lineWidth:15,duration:1e3,tail_duration:2500}}},this.options),this.options.down.tips.color=this.options.down.tips.colors[0],this.options.down.tips.colors=this.options.down.tips.colors.map(function(t){return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}})},initPullDownTips:function(){var i=this;t.isFunction(i.options.down.callback)&&(i.pullDownTips=function(){var t=document.querySelector("."+n);return t&&t.parentNode.removeChild(t),t||(t=document.createElement("div"),t.classList.add(n),t.innerHTML='<div class="mui-pull-top-wrapper"><div class="mui-pull-top-canvas"><canvas id="pullDownTips" width="'+i.options.down.tips.size+'" height="'+i.options.down.tips.size+'"></canvas></div></div>',t.addEventListener("webkitTransitionEnd",i),document.body.appendChild(t)),i.pullDownCanvas=document.getElementById("pullDownTips"),i.pullDownCanvasCtx=i.pullDownCanvas.getContext("2d"),i.canvasUtils.init(i.pullDownCanvas,i.options.down.tips),t}())},removePullDownTips:function(){this._super(),this.canvasUtils.stopSpin()},pulling:function(t){var n=Math.min(t/(1.5*this.options.down.height),1),i=Math.min(1,2*n);this.pullDownTips.style.webkitTransform="translate3d(0,"+(t<0?0:t)+"px,0)",this.pullDownCanvas.style.opacity=i,this.pullDownCanvas.style.webkitTransform="rotate("+300*n+"deg)";var s=this.pullDownCanvas,e=this.pullDownCanvasCtx,a=this.options.down.tips.size;e.lineWidth=this.options.down.tips.lineWidth,e.fillStyle="#"+this.options.down.tips.color,e.strokeStyle="#"+this.options.down.tips.color,e.stroke(),e.clearRect(0,0,a,a),s.style.display="none",s.offsetHeight,s.style.display="inherit",this.canvasUtils.drawArcedArrow(e,a/2+.5,a/2,a/4,0*Math.PI,5/3*Math.PI*i,!1,1,2,.7853981633974483,25,this.options.down.tips.lineWidth,this.options.down.tips.lineWidth)},beforeChangeOffset:function(t){},afterChangeOffset:function(t){},dragEndAfterChangeOffset:function(t){t?(this.canvasUtils.startSpin(),this.pullDownLoading()):(this.canvasUtils.stopSpin(),this.endPullDownToRefresh())},canvasUtils:function(){function n(t,n,i,s){return i*t/s+n}function i(t,n,i,s){return(t/=s/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n}function s(t,n,i){var s=Math.min(n,i),e=Math.max(n,i);return t<s?s:t>e?s:t}var e=null,a=null,o=200,r=15,l=0,p=0,h=0,d=0,u=0,c=180,f=Math.PI/180,v=1e3,M=2500,w=["35ad0e","d8ad44","d00324","dc00b8","017efc"],g=null,y=function(t,n,i,s,e,a,o,r){"use strict";"string"==typeof n&&(n=parseInt(n)),"string"==typeof i&&(i=parseInt(i)),"string"==typeof s&&(s=parseInt(s)),"string"==typeof e&&(e=parseInt(e)),"string"==typeof a&&(a=parseInt(a)),"string"==typeof o&&(o=parseInt(o));2*Math.PI;switch(t.save(),t.beginPath(),t.moveTo(n,i),t.lineTo(s,e),t.lineTo(a,o),r){case 0:var l=Math.sqrt((a-n)*(a-n)+(o-i)*(o-i));t.arcTo(s,e,n,i,.55*l),t.fill();break;case 1:t.beginPath(),t.moveTo(n,i),t.lineTo(s,e),t.lineTo(a,o),t.lineTo(n,i),t.fill();break;case 2:t.stroke();break;case 3:var p=(n+s+a)/3,h=(i+e+o)/3;t.quadraticCurveTo(p,h,n,i),t.fill();break;case 4:var d,u,c,f,l,v=5;if(a==n)l=o-i,d=(s+n)/2,c=(s+n)/2,u=e+l/v,f=e-l/v;else{l=Math.sqrt((a-n)*(a-n)+(o-i)*(o-i));var M=(n+a)/2,w=(i+o)/2,g=(M+s)/2,y=(w+e)/2,b=(o-i)/(a-n),m=l/(2*Math.sqrt(b*b+1))/v,I=b*m;d=g-m,u=y-I,c=g+m,f=y+I}t.bezierCurveTo(d,u,c,f,n,i),t.fill()}t.restore()},b=function(t,n,i,s,e,a,o,r,l,p,h,d,u){"use strict";r="undefined"!=typeof r?r:3,l="undefined"!=typeof l?l:1,p="undefined"!=typeof p?p:Math.PI/8,d=d||1,u=u||10,h="undefined"!=typeof h?h:10,t.save(),t.lineWidth=d,t.beginPath(),t.arc(n,i,s,e,a,o),t.stroke();var c,f,v,M,w;1&l&&(c=Math.cos(e)*s+n,f=Math.sin(e)*s+i,v=Math.atan2(n-c,f-i),o?(M=c+10*Math.cos(v),w=f+10*Math.sin(v)):(M=c-10*Math.cos(v),w=f-10*Math.sin(v)),m(t,c,f,M,w,r,2,p,h)),2&l&&(c=Math.cos(a)*s+n,f=Math.sin(a)*s+i,v=Math.atan2(n-c,f-i),o?(M=c-10*Math.cos(v),w=f-10*Math.sin(v)):(M=c+10*Math.cos(v),w=f+10*Math.sin(v)),m(t,c-u*Math.sin(a),f+u*Math.cos(a),M-u*Math.sin(a),w+u*Math.cos(a),r,2,p,h)),t.restore()},m=function(t,n,i,s,e,a,o,r,l){"use strict";"string"==typeof n&&(n=parseInt(n)),"string"==typeof i&&(i=parseInt(i)),"string"==typeof s&&(s=parseInt(s)),"string"==typeof e&&(e=parseInt(e)),a="undefined"!=typeof a?a:3,o="undefined"!=typeof o?o:1,r="undefined"!=typeof r?r:Math.PI/8,l="undefined"!=typeof l?l:10;var p,h,d,u,c="function"!=typeof a?y:a,f=Math.sqrt((s-n)*(s-n)+(e-i)*(e-i)),v=(f-l/3)/f;1&o?(p=Math.round(n+(s-n)*v),h=Math.round(i+(e-i)*v)):(p=s,h=e),2&o?(d=n+(s-n)*(1-v),u=i+(e-i)*(1-v)):(d=n,u=i),t.beginPath(),t.moveTo(d,u),t.lineTo(p,h),t.stroke();var M=Math.atan2(e-i,s-n),w=Math.abs(l/Math.cos(r));if(1&o){var g=M+Math.PI+r,b=s+Math.cos(g)*w,m=e+Math.sin(g)*w,I=M+Math.PI-r,T=s+Math.cos(I)*w,C=e+Math.sin(I)*w;c(t,b,m,s,e,T,C,a)}if(2&o){var g=M+r,b=n+Math.cos(g)*w,m=i+Math.sin(g)*w,I=M-r,T=n+Math.cos(I)*w,C=i+Math.sin(I)*w;c(t,b,m,n,i,T,C,a)}},I=function(t,i){var e=t%i;e<h&&w.push(w.shift());var a=w[0],o=w[1],r=s(n(e,a.r,o.r-a.r,i),a.r,o.r),l=s(n(e,a.g,o.g-a.g,i),a.g,o.g),p=s(n(e,a.b,o.b-a.b,i),a.b,o.b);return h=e,"rgb("+parseInt(r)+","+parseInt(l)+","+parseInt(p)+")"},T=function(t){var s=t||(new Date).getTime();p||(p=s),l=s-p,d=i((l+M/2)%M,0,v,M),u=n((l+d)%v,0,360,v),c=20+Math.abs(n((l+M/2)%M,-300,600,M)),a.lineWidth=r,a.lineCap="round",a.strokeStyle=I(l,v),a.clearRect(0,0,o,o),e.style.display="none",e.offsetHeight,e.style.display="inherit",a.beginPath(),a.arc(o/2,o/2,o/4,parseInt(u-c)%360*f,parseInt(u)%360*f,!1),a.stroke(),g=requestAnimationFrame(T)},C=function(){p=0,h=0,g=requestAnimationFrame(T)},P=function(){g&&cancelAnimationFrame(g)},D=function(n,i){e=n,a=e.getContext("2d");var i=t.extend(!0,{},i);w=i.colors,v=i.duration,M=i.tail_duration,o=i.size,r=i.lineWidth};return{init:D,drawArcedArrow:b,startSpin:C,stopSpin:P}}()})}(mui);